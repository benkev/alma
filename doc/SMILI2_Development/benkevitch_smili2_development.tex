\documentclass[preprint]{aastex}

\begin{document}

\title{Development and Validation of the SMILI2 Input/Output for CASA FITS Files}

\author{L. V. Benkevitch}
\affil{MIT Haystack Observatory, Westford MA}

SMILI2 is a Python package for imaging multidimensional visibility data from radio interferometer arrays. SMILI2 is being developed in the framework of Atacama Large Millimeter/submillimeter Array (ALMA). CASA, the Common Astronomy Software Applications package, is the radio astronomy data processing software being developed and maintained by NRAO, National Radio Astronomical Observatory. CASA can be considered as a successor to the older and mature package AIPS. 

It is common to save, keep, and transfer brightness image data in the FITS format files. However, SMILI2 has its native format for keeping the image data different from the FITS and other standards. In order to import and export external images the SMILI2 Image class has a set of methods to load and save the internal image data in FITS format. Unfortunately, different astronomy software systems have different FITS formats and metadata, so SMILI2 has to have several methods to load/save the FITS files in the most common formats.

This document describes the development and testing of the \verb@load_fits_casa()@ and \verb@to_fits_casa()@ methods to load/save the image FITS files in the format generated by CASA and accepted by CASA. Also, described are the Python scripts created for the testing: 

\begin{enumerate}
  \item \verb@@
  \item \verb@alma_util.py@
  \item \verb@RoundSpottyDisk_Betelgeuse.py@
  \item \verb@load_save_Betelgeuse.py@
  \item three
  \item four
\end{enumerate}


\section{A Utility Module}

A simple module \verb@alma_util.py@ provides the only function, \verb@workdir.py@, returning a string with the "work" directory path. It helps make scripts running universally on any of several machines used by the SMILI2 developers. The "work" directory (supposedly containing the ALMA and \verb@smili2_dev@ directories) is different on different servers. On leonid2 and capelin (owned by Lynn Matthews) it is \verb@/data-smili/@. On isco it is \verb@/data-isco/data-smili/@. On my machine it is my home directory, \verb@/home/benkev/@, etc. 

In order to use it in CASA scripts, the user should copy \verb@alma_util.py@ to his or her CASA installation \verb@site-packages@ directory, which is like \\
\verb@casa-release-5.7.2-4.el7/lib/python2.7/site-packages/@.


\section{Creating a FITS Model Image of Betelgeuse}

The script \verb@RoundSpottyDisk_Betelgeuse.py@ creates a circular spotted disk at the Betelgeuse sky coordinates at  \verb@RA=05h55m10.0800s@, \verb@DEC=07d24m25.200s@ (equinox \verb@J2000@), the size equivalent to 80 $\mu$as, which is the size of Betelgeuse found by Lim \emph{et al.} at 46 GHz. The script must be run in CASA: \\
\verb@execfile('RoundSpottyDisk_Betelgeuse.py')@


\section{Loading and Saving the FITS Image with SMILI2}



\section{Testing the FITS Image Datacubes Identity}
\section{Testing the CASA Measurement Sets' Visibility Data Identity}
\section{Testing the Calibration Tables Identity}



\section{Appendix}

The testing software is located at the github repository \\
\verb@https://github.com/benkev/alma@ \\
The user can create a local copy at a disk location using the command \\
\verb%$ git clone git@github.com:benkev/alma.git alma% \\

Currently, the software does not require compilation or installation.



\end{document}